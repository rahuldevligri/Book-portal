<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Change Password</title>

    <link rel="stylesheet" type="text/css" th:href="@{/style.css}">
    <meta charset="UTF-8">
</head>

<body topmargin="0" leftmargin="0">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td align="center">

            <table width="40%" bgcolor="#BDDFFF"
                   style="border:3px solid #006080;margin-top:60px;"
                   cellpadding="8">

                <tr bgcolor="#0098CA">
                    <td align="center">
                        <font color="white"><b>Change Password</b></font>
                    </td>
                </tr>

                <!-- ✅ SUCCESS MESSAGE -->
                <tr th:if="${success}">
                    <td align="center" style="color:green;">
                        <b th:text="${success}"></b>
                    </td>
                </tr>

                <!-- ❌ ERROR MESSAGE -->
                <tr th:if="${error}">
                    <td align="center" style="color:red;">
                        <b th:text="${error}"></b>
                    </td>
                </tr>

                <tr>
                    <td>
                        <form th:action="@{/change-password}"
                              method="post"
                              th:object="${changePasswordForm}">

                            <!-- CSRF -->
                            <input type="hidden"
                                   th:name="${_csrf.parameterName}"
                                   th:value="${_csrf.token}"/>

                            <table width="100%" cellpadding="6">
                                <tr>
                                    <td align="right"><b>Old Password:</b></td>
                                    <td>
                                        <input type="password"
                                               th:field="*{oldPassword}"
                                               required>
                                    </td>
                                </tr>

                                <tr>
                                    <td align="right"><b>New Password:</b></td>
                                    <td>
                                        <input type="password"
                                               th:field="*{newPassword}"
                                               required>
                                    </td>
                                </tr>

                                <tr>
                                    <td align="right"><b>Confirm Password:</b></td>
                                    <td>
                                        <input type="password"
                                               th:field="*{confirmPassword}"
                                               required>
                                    </td>
                                </tr>

                                <tr>
                                    <td colspan="2" align="center">
                                        <br>
                                        <button type="submit">Change Password</button>
                                        &nbsp;&nbsp;
                                        <a th:href="@{/user-options}">Cancel</a>
                                    </td>
                                </tr>
                            </table>

                        </form>
                    </td>
                </tr>

            </table>

        </td>
    </tr>
</table>

</body>
</html>
